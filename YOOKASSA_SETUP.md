# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ÆKassa (–Ø–Ω–¥–µ–∫—Å.–ö–∞—Å—Å–∞) –¥–ª—è –ø–æ–¥–ø–∏—Å–æ–∫

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

### 1. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –º–∞–≥–∞–∑–∏–Ω –≤ –ÆKassa

1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ https://yookassa.ru/
2. –ù–∞–∂–º–∏—Ç–µ "–í–æ–π—Ç–∏" –∏–ª–∏ "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è"
3. –°–æ–∑–¥–∞–π—Ç–µ –º–∞–≥–∞–∑–∏–Ω

**‚ö†Ô∏è –í–∞–∂–Ω–æ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:**

–ï—Å–ª–∏ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ—Å–∏—Ç —É–∫–∞–∑–∞—Ç—å:
- **–°—Å—ã–ª–∫—É –Ω–∞ —Å–∞–π—Ç** ‚Üí —É–∫–∞–∂–∏—Ç–µ `http://localhost:3000` –∏–ª–∏ `https://example.com` (–¥–ª—è —Ç–µ—Å—Ç–∞ –ø–æ–¥–æ–π–¥–µ—Ç –ª—é–±–∞—è)
- **–°—Å—ã–ª–∫—É –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å —Ä–µ–∫–≤–∏–∑–∏—Ç–∞–º–∏** ‚Üí —É–∫–∞–∂–∏—Ç–µ `http://localhost:3000/policy` –∏–ª–∏ `https://example.com/policy`
- **–ù–∞–∑–≤–∞–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞** ‚Üí –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å "–¢–µ—Å—Ç–æ–≤—ã–π –º–∞–≥–∞–∑–∏–Ω" –∏–ª–∏ "Lumia AI Test"
- **–û–ø–∏—Å–∞–Ω–∏–µ** ‚Üí –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π"

**–î–ª—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞ —ç—Ç–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ** - –≥–ª–∞–≤–Ω–æ–µ –ø–æ–ª—É—á–∏—Ç—å –∫–ª—é—á–∏ API. –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –∫–ª—é—á–µ–π –º–æ–∂–Ω–æ —Å—Ä–∞–∑—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–ª–∞—Ç–µ–∂–∏.

### 2. –ü–æ–ª—É—á–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–ª—é—á–∏

1. –ó–∞–π–¥–∏—Ç–µ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –ÆKassa
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **"–ù–∞—Å—Ç—Ä–æ–π–∫–∏"** ‚Üí **"–ö–ª—é—á–∏ API"** (–∏–ª–∏ "API –∫–ª—é—á–∏")
3. –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ —Ç–æ–ª—å–∫–æ –±–æ–µ–≤—ã–µ –∫–ª—é—á–∏, –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ **"–¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º"** (–æ–±—ã—á–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤–≤–µ—Ä—Ö—É)
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ:
   - **shopId** (ID –º–∞–≥–∞–∑–∏–Ω–∞) - –æ–±—ã—á–Ω–æ —ç—Ç–æ —á–∏—Å–ª–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä `123456`
   - **–°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á** (Secret key) - –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `test_` –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞

**üí° –°–æ–≤–µ—Ç:** –ï—Å–ª–∏ –Ω–µ –≤–∏–¥–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–ª—é—á–∏, —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤–∫–ª—é—á–µ–Ω "–¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º" –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –º–∞–≥–∞–∑–∏–Ω–∞.

### 3. –°–æ–∑–¥–∞–π—Ç–µ `.env.local` —Ñ–∞–π–ª

–í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env.local`:

```env
# –ÆKassa –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
YOOKASSA_SHOP_ID=–≤–∞—à_shop_id
YOOKASSA_SECRET_KEY=test_–≤–∞—à_—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á

# Base URL
NEXT_PUBLIC_BASE_URL=http://localhost:3000
```

**–í–∞–∂–Ω–æ:** –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–ª—é—á–∏, –Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è —Å `test_`

### 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä

```bash
npm run dev
```

### 5. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –æ–ø–ª–∞—Ç—É

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –û—Ç–∫—Ä–æ–π—Ç–µ –æ–∫–Ω–æ –ø–æ–¥–ø–∏—Å–æ–∫
3. –ù–∞–∂–º–∏—Ç–µ "Upgrade Now" –Ω–∞ Premium –∏–ª–∏ Team
4. –û—Ç–∫—Ä–æ–µ—Ç—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–ø–ª–∞—Ç—ã –ÆKassa

### 6. –¢–µ—Å—Ç–æ–≤—ã–µ –∫–∞—Ä—Ç—ã –¥–ª—è –æ–ø–ª–∞—Ç—ã

–í —Ç–µ—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ –ÆKassa –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

| –°—Ü–µ–Ω–∞—Ä–∏–π | –ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã | –î–∞—Ç–∞ | CVC |
|----------|-------------|------|-----|
| ‚úÖ –£—Å–ø–µ—à–Ω–∞—è –æ–ø–ª–∞—Ç–∞ | `5555 5555 5555 4444` | `12/25` | `123` |
| ‚úÖ –£—Å–ø–µ—à–Ω–∞—è –æ–ø–ª–∞—Ç–∞ | `4111 1111 1111 1111` | `12/25` | `123` |
| ‚ùå –û—Ç–∫–ª–æ–Ω–µ–Ω–Ω–∞—è | `4000 0000 0000 0002` | `12/25` | `123` |

**–í–∞–∂–Ω–æ:** 
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª—é–±—É—é –±—É–¥—É—â—É—é –¥–∞—Ç—É –∏—Å—Ç–µ—á–µ–Ω–∏—è
- –õ—é–±–æ–π CVC –∫–æ–¥
- –í —Ç–µ—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–µ–Ω—å–≥–∏ –Ω–µ —Å–ø–∏—Å—ã–≤–∞—é—Ç—Å—è

## üìù –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –º–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –¥–ª—è —Ç–µ—Å—Ç–∞)

Webhook –Ω—É–∂–µ–Ω –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏ –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã. –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ:

**–í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å webhook (–¥–ª—è —Ç–µ—Å—Ç–∞)**
- –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–µ—Ä–Ω–µ—Ç—Å—è –Ω–∞ `/payment/success`
- –ü–æ–¥–ø–∏—Å–∫–∞ –æ–±–Ω–æ–≤–∏—Ç—Å—è –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –Ω–∞ —Å–∞–π—Ç

**–í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ngrok –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ ngrok: https://ngrok.com/
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ: `ngrok http 3000`
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ HTTPS URL (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://abc123.ngrok.io`)
4. –í –ÆKassa ‚Üí "–ù–∞—Å—Ç—Ä–æ–π–∫–∏" ‚Üí "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è" –¥–æ–±–∞–≤—å—Ç–µ: `https://abc123.ngrok.io/api/yookassa-webhook`
5. –í—ã–±–µ—Ä–∏—Ç–µ —Å–æ–±—ã—Ç–∏—è: `payment.succeeded`, `payment.canceled`

**–í–∞—Ä–∏–∞–Ω—Ç 3: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ**
- –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä –¥–æ–±–∞–≤—å—Ç–µ URL: `https://yourdomain.com/api/yookassa-webhook`

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã:
- –í—ã –≤–µ—Ä–Ω–µ—Ç–µ—Å—å –Ω–∞ `/payment/success`
- –ü–æ–¥–ø–∏—Å–∫–∞ –æ–±–Ω–æ–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –í –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ –ÆKassa –±—É–¥–µ—Ç –≤–∏–¥–µ–Ω –ø–ª–∞—Ç–µ–∂

## üí∞ –¶–µ–Ω—ã –ø–æ–¥–ø–∏—Å–æ–∫:

- **Premium:** 1500‚ÇΩ/–º–µ—Å—è—Ü
- **Team:** 2000‚ÇΩ/–º–µ—Å—è—Ü

## üîç –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ÆKassa:

- API: https://yookassa.ru/developers/api
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: https://yookassa.ru/developers/payment-acceptance/testing-and-going-live/testing

